å¦‚æœæŸä¸€é—®é¢˜æœ‰å¾ˆå¤šé‡å å­é—®é¢˜ï¼Œä½¿ç”¨åŠ¨æ€è§„åˆ’æ˜¯æœ€æœ‰æ•ˆçš„ã€‚
æ‰€ä»¥åŠ¨æ€è§„åˆ’ä¸­**æ¯ä¸€ä¸ªçŠ¶æ€ä¸€å®šæ˜¯ç”±ä¸Šä¸€ä¸ªçŠ¶æ€æ¨å¯¼å‡ºæ¥çš„**ï¼Œè¿™ä¸€ç‚¹å°±åŒºåˆ†äºè´ªå¿ƒï¼Œè´ªå¿ƒæ²¡æœ‰çŠ¶æ€æ¨å¯¼ï¼Œè€Œæ˜¯ä»å±€éƒ¨ç›´æ¥é€‰æœ€ä¼˜çš„ï¼Œ

**åŠ¨æ€è§„åˆ’äº”éƒ¨æ›²:**
1. ç¡®å®šdpæ•°ç»„ï¼ˆdp tableï¼‰ä»¥åŠä¸‹æ ‡çš„å«ä¹‰
2. ç¡®å®šé€’æ¨å…¬å¼
3. dpæ•°ç»„å¦‚ä½•åˆå§‹åŒ–
4. ç¡®å®šéå†é¡ºåº
5. ä¸¾ä¾‹æ¨å¯¼dpæ•°ç»„

# 01èƒŒåŒ…é—®é¢˜

## é—®é¢˜æè¿°:
æœ‰nä»¶ç‰©å“å’Œä¸€ä¸ªæœ€å¤šèƒ½èƒŒé‡é‡ä¸ºw çš„èƒŒåŒ…ã€‚ç¬¬iä»¶ç‰©å“çš„é‡é‡æ˜¯`weight[i]`ï¼Œå¾—åˆ°çš„ä»·å€¼æ˜¯`value[i]` ã€‚**æ¯ä»¶ç‰©å“åªèƒ½ç”¨ä¸€æ¬¡**ï¼Œæ±‚è§£å°†å“ªäº›ç‰©å“è£…å…¥èƒŒåŒ…é‡Œç‰©å“ä»·å€¼æ€»å’Œæœ€å¤§ã€‚
## è§£å†³æ€è·¯:
### 1. **ç¡®å®šdpæ•°ç»„ä»¥åŠä¸‹æ ‡çš„å«ä¹‰:**
- æœ‰ä¸¤ä¸ªç»´åº¦çš„æ•°æ®: 1)ç‰©å“; 2)èƒŒåŒ…å®¹é‡(é‡é‡). 
- ç‰©å“çš„é‡é‡ä»¥åŠä»·å€¼å¦‚ä¸‹å›¾æ‰€ç¤º
![[Pasted image 20241016144113.png]]
#### **å¡«å……ç‰©å“dpæ•°ç»„:**
>å› ä¸ºè¦è·å–æœ€å¤§ä»·å€¼,æ‰€ä»¥è¡¨æ ¼å†…çš„æ•°æ®åº”å½“æ˜¯**å½“å‰æƒ…å†µä¸‹æ‰€èƒ½å–å¾—çš„æœ€å¤§ä»·å€¼.**

è€ƒè™‘**ä»…æœ‰ç‰©å“1**çš„æƒ…å†µ,éå†æ‰€æœ‰èƒŒåŒ…å®¹é‡,æ­¤æ—¶å¯ä»¥å¡«å……ç¬¬ä¸€è¡Œ:
![[Pasted image 20241016143756.png|450]]

ç»§ç»­å¡«å……ç¬¬äºŒè¡Œ,å³ç‰©å“0å’Œç‰©å“1,éå†æ‰€æœ‰çš„èƒŒåŒ…å®¹é‡: (æ³¨æ„,ç‰©å“1çš„é‡é‡ä¸º3!)
![[Pasted image 20241016143924.png|450]]

ç»§ç»­å¡«å……ç¬¬ä¸‰è¡Œ,æ­¤æ—¶æœ‰3ä¸ªç‰©å“,éå†æ‰€æœ‰èƒŒåŒ…å®¹é‡:
![[Pasted image 20241016144741.png|450]]
>[!æ³¨æ„:]
>**æ˜ç¡®dp[i][j]çš„å«ä¹‰:åœ¨ç‰©å“0~iä¸­é€‰æ‹©ç‰©å“,åœ¨ä¸è¶…è¿‡å®¹é‡jçš„æƒ…å†µä¸‹,ä½¿å¾—èƒŒåŒ…æ€»ä»·å€¼æœ€å¤§!**

æœ€ç»ˆ,æˆ‘ä»¬è¦è·å–çš„ç»“æœå³ä¸º`dp[2][4]`!

### 2. ç¡®å®šé€’æ¨å…¬å¼:
ä»¥`dp[1][4]`ä¸¾ä¾‹,åˆ†ä¸ºä¸¤ç§æƒ…å†µ:**æ”¾ç‰©å“1æˆ–ä¸æ”¾ç‰©å“1.**
	æ”¾ç‰©å“1æ—¶,éœ€è¦ä¿ç•™ç‰©å“1çš„å®¹é‡,å¹¶ä¸”è€ƒè™‘åˆ°ç‰©å“1çš„é‡é‡ä¸º3,æ‰€ä»¥å¯ç”±"**`dp[0][1]`+ç‰©å“1**"è·å¾—.
	ä¸æ”¾ç‰©å“1æ—¶,æ­¤æ—¶ç”±`dp[0][4]`è·å¾—.

**ä¸Šè¿°æƒ…å†µå¯æŠ½è±¡ä¸º:**
- ä¸æ”¾ç‰©å“i: èƒŒåŒ…å®¹é‡ä¸ºj,ä¸æ”¾ç‰©å“içš„æœ€å¤§ä»·å€¼ä¸º`dp[i-1][j]`.
- æ”¾ç‰©å“i: æœ€å¤§ä»·å€¼ä¸º`dp[i-1][j-weight[i]]+value[i]`.
æ‰€ä»¥,è¦è·å–`dp[i][j]`çš„æœ€å¤§ä»·å€¼,å³å–ä¸Šè¿°ä¸¤ç§æƒ…å†µçš„è¾ƒå¤§å€¼:
`dp[i][j] = Math.max(dp[i-1][j],dp[i-1][j-weight[i]]+value[i])`

### 3. dpæ•°ç»„çš„åˆå§‹åŒ–:
å³è€ƒè™‘ä¸Šè¿°è¡¨æ ¼çš„è¾¹ç•Œæ¡ä»¶: i=0/j=0çš„æƒ…å†µ:
![[Pasted image 20241016150727.png|450]]

### 4. ç¡®å®šéå†é¡ºåº:
>ä¸€èˆ¬æ¥è¯´,å…ˆéå†ç‰©å“,æˆ–è€…å…ˆéå†èƒŒåŒ…å®¹é‡éƒ½å¯ä»¥.

æ ¹æ®æˆ‘çš„æ€ç»´,ä¸€èˆ¬å–œæ¬¢å…ˆéå†ç‰©å“,ç„¶åéå†èƒŒåŒ…å®¹é‡,å³i=0æ—¶,jä»0~4;i=1,jä»0~4;i=2,jä»0~4.\
```java
for (int i = 1; i < weight.size();i++){
	for (int j = 0; j <= bagWeight; j++){
		if (j < weight[i]) dp[i][j] = dp[i-1][j];
		else dp[i][j] = Math.max(dp[i-1][j],dp[i-1][j-weight[i]]+value[i]]);
	}
}
```
## æ»šåŠ¨æ•°ç»„ä¼˜åŒ–:
>åœ¨01èƒŒåŒ…é—®é¢˜ä¸­,å¯ä»¥ç”¨ä¸€ç»´æ»šåŠ¨æ•°ç»„æ¥ä»£æ›¿äºŒç»´æ•°ç»„,è¿›è¡Œæ—¶é—´,ç©ºé—´å¤æ‚åº¦ä¸Šçš„ä¼˜åŒ–.
![[Pasted image 20241017085159.png|450]]
1. dpæ•°ç»„çš„å®šä¹‰: `dp[j]`è¡¨ç¤ºå®¹é‡ä¸ºjçš„èƒŒåŒ…,æ‰€èƒŒçš„ç‰©å“æœ€å¤§ä»·å€¼ä¸º`dp[j]`.
2. ==**é€’æ¨å…¬å¼:**== `dp[j] = Math.max(dp[j],dp[j-weight[i]] + value[i])`;
3. åˆå§‹åŒ–:`dp[j]`è¡¨ç¤º**å®¹é‡ä¸ºjçš„èƒŒåŒ…**,æ‰€èƒŒçš„ç‰©å“æœ€å¤§ä»·å€¼ä¸º`dp[j]`,æ‰€ä»¥åˆå§‹åŒ–`dp[0]=0`;
4. ==**éå†é¡ºåº:**== 
	æ­£åºéå†æ—¶,æƒ…å†µå¦‚ä¸‹,å¯ä»¥çœ‹åˆ°`dp[2]`å®è´¨ä¸Šæ˜¯å°†ç‰©å“0æ”¾å…¥äº†2æ¬¡!
	`dp[1] = max(dp[1],dp[1-1]+15) = max(dp[1],dp[0]+15)=15`;
	`dp[2] = max(dp[2],dp[2-1]+15 = max(dp[2],dp[1]+15)=30`;
	é€†åºéå†:
	`dp[2] = max(dp[2],dp[2-1]+15) = max(dp[2],dp[1]+15)=15` (æ­¤æ—¶`dp[0]`ä¸ºåˆå§‹åŒ–çš„0)
	`dp[1] = max(dp[1],dp[1-1]+15 = max(dp[1],dp[0]+15)=15`

```java
for (int i = 0; i < size; i++){
	for (int j = bagWeight; j >= weight[i]; j--){
		dp[j] = Math.max(dp[j],dp[j - weight[i]] + value[i])
	}
}
```
# å®Œå…¨èƒŒåŒ…é—®é¢˜:
>**ä¸01èƒŒåŒ…çš„åŒºåˆ«åœ¨äº:å®Œå…¨èƒŒåŒ…ä¸­æŸä¸ªç‰©å“å¯ä»¥æ·»åŠ å¤šæ¬¡.**

å›æƒ³å‰é¢01èƒŒåŒ…é—®é¢˜çš„æ­£åºéå†,ä¼šå¯¼è‡´ç‰©å“è¢«é‡å¤æ·»åŠ ,è€Œè¿™æ­£æ˜¯å®Œå…¨èƒŒåŒ…éœ€è¦çš„æ•ˆæœ,æ‰€ä»¥åœ¨å®Œå…¨èƒŒåŒ…é—®é¢˜ä¸­,éå†ä»£ç ä¸º:
>	è¿™é‡Œéå†æ—¶ä»`weight[i]`å¼€å§‹,**æ˜¯ä¿è¯æœ€å°‘èƒ½å–ä¸€ä¸ªç‰©å“**,æ¯•ç«Ÿå®¹é‡å°äºç‰©å“é‡é‡æ—¶,æ— å¤ªå¤§æ„ä¹‰.

```java
for (int i = 0; i < weight.size(); i++){ // éå†ç‰©å“
	for (int j = weight[i]; j <= bagWeight; j++){   //éå†èƒŒåŒ…å®¹é‡(æ­£åº)
		dp[j] = Math.max(dp[j],dp[j-weight[i]]+value[i]);
	}
}
```
>å¯¹äºä¸‹é¢çš„æ±‚è§£"æœ€å°‘ä¸ªæ•°"çš„é—®é¢˜,éå†ä¸€èˆ¬å¦‚ä¸‹:
>	1. é¦–å…ˆè¦å…ˆåˆå§‹åŒ–;
>	2. å…ˆéå†ç‰©å“,å†éå†å®¹é‡,å¹¶ä¸”æ³¨æ„ç‰©å“æ˜¯å¯ä»¥é‡å¤ä½¿ç”¨çš„(æ‰€ä»¥å†…å±‚å¾ªç¯ä¹Ÿæ˜¯æ­£åº);
>	3. æ³¨æ„å¯¹äºæŸäº›é—®é¢˜,åˆ¤æ–­`dp[j-coins[i]]`æ˜¯å¦å¯è¾¾!
```java
Arrays.fill(dp,Integer.MAX_VALUE);
dp[0]=0;

for (int i = 0; i < n; i++) {   // ç‰©å“  
    for (int j = coins[i]; j <= amount; j++) {   // å®¹é‡  
        if (dp[j - coins[i]] != Integer.MAX_VALUE) {  
            dp[j] = Math.min(dp[j - coins[i]] + 1, dp[j]);  
        }  
    }  
}
```

## 518. é›¶é’±å…‘æ¢II
### é¢˜ç›®:
ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„Â `coins`Â è¡¨ç¤ºä¸åŒé¢é¢çš„ç¡¬å¸ï¼Œå¦ç»™ä¸€ä¸ªæ•´æ•°Â `amount`Â è¡¨ç¤ºæ€»é‡‘é¢ã€‚

è¯·ä½ è®¡ç®—å¹¶è¿”å›å¯ä»¥å‡‘æˆæ€»é‡‘é¢çš„ç¡¬å¸ç»„åˆæ•°ã€‚å¦‚æœä»»ä½•ç¡¬å¸ç»„åˆéƒ½æ— æ³•å‡‘å‡ºæ€»é‡‘é¢ï¼Œè¿”å›Â `0`Â ã€‚

å‡è®¾æ¯ä¸€ç§é¢é¢çš„ç¡¬å¸æœ‰æ— é™ä¸ªã€‚

é¢˜ç›®æ•°æ®ä¿è¯ç»“æœç¬¦åˆ 32 ä½å¸¦ç¬¦å·æ•´æ•°ã€‚
### ä¿¡æ¯:
- **éš¾åº¦**: medium
- **é‡è¦æ€§:** #â˜…â˜…â˜…â˜†â˜†
### æ€è·¯:
- ç¡¬å¸å¯ä»¥é‡å¤é€‰æ‹©,æ‰€ä»¥æ˜¯å®Œå…¨èƒŒåŒ…é—®é¢˜.
- `dp[j] += dp[j-coins[i]]`:æ˜¯ä¸€ç›´åœ¨**æ›´æ–°(ç´¯åŠ )**`dp[j]`çš„å¯èƒ½æ€§
![[Pasted image 20241017140738.png|500]]
### ä»£ç :
```java
class Solution {  
    public int change(int amount, int[] coins) {  
        int n = coins.length;  
        // dp[j]è¡¨ç¤ºå®¹é‡ä¸ºjçš„èƒŒåŒ…çš„æœ€å¤§ä»·å€¼,åœ¨è¿™é‡Œ,ç‰©å“ä»·å€¼ä¸é‡é‡ä¸€æ ·  
        int[] dp = new int[amount+1];  
        dp[0] = 1;  
        for (int i = 0; i < n; i++) {  
            for (int j = coins[i]; j <= amount; j++) {  
                dp[j] += dp[j-coins[i]];  
            }  
        }  
        return dp[amount];  
    }  
}  
```

## 377. ç»„åˆæ€»æ•°IV
### é¢˜ç›®:
ç»™ä½ ä¸€ä¸ªç”±Â **ä¸åŒ**Â æ•´æ•°ç»„æˆçš„æ•°ç»„Â `nums`Â ï¼Œå’Œä¸€ä¸ªç›®æ ‡æ•´æ•°Â `target`Â ã€‚è¯·ä½ ä»Â `nums`Â ä¸­æ‰¾å‡ºå¹¶è¿”å›æ€»å’Œä¸ºÂ `target`Â çš„å…ƒç´ **ç»„åˆçš„ä¸ªæ•°**ã€‚

é¢˜ç›®æ•°æ®ä¿è¯ç­”æ¡ˆç¬¦åˆ 32 ä½æ•´æ•°èŒƒå›´ã€‚
### ä¿¡æ¯:
- **éš¾åº¦**: medium
- **é‡è¦æ€§:** #â˜…â˜…â˜…â˜…â˜†
### æ€è·¯:
- ä¸[[#518. é›¶é’±å…‘æ¢II]]å‡ ä¹ä¸€æ ·,ä½†æ˜¯518æ˜¯æ±‚ç»„åˆ,æœ¬é¢˜æ˜¯æ±‚æ’åˆ—! å¯¹äºæ±‚æ’åˆ—é—®é¢˜,**éœ€è¦åœ¨å¤–å±‚éå†èƒŒåŒ…å®¹é‡,å†…å±‚éå†ç‰©å“,å¦åˆ™åªä¼šæœ‰{1,3}ç»„åˆ,è€Œä¸ä¼šæœ‰{3,1}ç»„åˆ,å› ä¸ºæ€»æ˜¯å…ˆæ”¾ç½®ç‰©å“1.**
### ä»£ç :
```java
class Solution {  
    public int combinationSum4(int[] nums, int target) {  
        int n = nums.length;  
        int[] dp = new int[target+1];  
        dp[0] = 1;  
  
        for (int i = 0; i <= target ; i++) {  
            for (int j = 0; j < n; j++) {  
                if (i - nums[j] >= 0) { // å®¹é‡å¤§äºç‰©å“é‡é‡æ—¶ï¼Œæ‰æ”¾  
                    dp[i] += dp[i-nums[j]];  
                }  
            }  
        }  
        return dp[target];  
    }  
}

```
## 70. çˆ¬æ¥¼æ¢¯
### é¢˜ç›®:
å‡è®¾ä½ æ­£åœ¨çˆ¬æ¥¼æ¢¯ã€‚éœ€è¦Â `n`Â é˜¶ä½ æ‰èƒ½åˆ°è¾¾æ¥¼é¡¶ã€‚

æ¯æ¬¡ä½ å¯ä»¥çˆ¬Â `1`Â æˆ–Â `2`Â ä¸ªå°é˜¶ã€‚ä½ æœ‰å¤šå°‘ç§ä¸åŒçš„æ–¹æ³•å¯ä»¥çˆ¬åˆ°æ¥¼é¡¶å‘¢ï¼Ÿ
### ä¿¡æ¯:
- **éš¾åº¦**: easy
- **é‡è¦æ€§:** #â˜…â˜…â˜…â˜†â˜†
### æ€è·¯:
- ä¸[[#377. ç»„åˆæ€»æ•°IV]]æ€è·¯ä¸€è‡´!
### ä»£ç :
```java
class Solution {  
    public int climbStairs(int n) {  
        int[] dp = new int[n+1];  
        dp[0] = 1;  
  
        for (int i = 1; i <= n; i++) {  
            for (int j = 1; j <= 2; j++) {  
                if (i >= j)  
                    dp[i] += dp[i-j];  
            }  
        }  
        return dp[n];  
    }  
}
```

## 322. é›¶é’±å…‘æ¢ 
### é¢˜ç›®:
ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„Â `coins`Â ï¼Œè¡¨ç¤ºä¸åŒé¢é¢çš„ç¡¬å¸ï¼›ä»¥åŠä¸€ä¸ªæ•´æ•°Â `amount`Â ï¼Œè¡¨ç¤ºæ€»é‡‘é¢ã€‚

è®¡ç®—å¹¶è¿”å›å¯ä»¥å‡‘æˆæ€»é‡‘é¢æ‰€éœ€çš„Â **æœ€å°‘çš„ç¡¬å¸ä¸ªæ•°**Â ã€‚å¦‚æœæ²¡æœ‰ä»»ä½•ä¸€ç§ç¡¬å¸ç»„åˆèƒ½ç»„æˆæ€»é‡‘é¢ï¼Œè¿”å›Â `-1`Â ã€‚

ä½ å¯ä»¥è®¤ä¸ºæ¯ç§ç¡¬å¸çš„æ•°é‡æ˜¯æ— é™çš„ã€‚
### ä¿¡æ¯:
- **éš¾åº¦**: medium
- **é‡è¦æ€§:** #â˜…â˜…â˜…â˜…â˜†
### æ€è·¯:
- æ€è·¯ä¸[[#279. å®Œå…¨å¹³æ–¹æ•°]]ä¸€è‡´,åŒºåˆ«åœ¨äºè¿™é‡Œéœ€è¦åˆ¤æ–­`dp[j-coins[i]]`æ˜¯å¦å¯è¾¾!
	- ä¾‹å¦‚å¯¹äº`coins=[2],amount=3`,æ­¤æ—¶`dp[3]`å°±æ˜¯ä¸å¯è¾¾çš„!
### ä»£ç :
```java
class Solution {  
    public int coinChange(int[] coins, int amount) {  
        int n = coins.length;  
        int[] dp = new int[amount + 1];  
        for (int i = 0; i < dp.length; i++) {  
            dp[i] = Integer.MAX_VALUE;  
        }  
        dp[0] = 0;  
  
        for (int i = 0; i < n; i++) {   // ç‰©å“  
            for (int j = coins[i]; j <= amount; j++) {   // å®¹é‡  
                if (dp[j - coins[i]] != Integer.MAX_VALUE) {  
                    dp[j] = Math.min(dp[j - coins[i]] + 1, dp[j]);  
                }  
            }  
        }  
        return dp[amount] == Integer.MAX_VALUE ? -1 : dp[amount];  
    }  
}  
```
## 279. å®Œå…¨å¹³æ–¹æ•°
### é¢˜ç›®:
ç»™ä½ ä¸€ä¸ªæ•´æ•°Â `n`Â ï¼Œè¿”å›Â **_å’Œä¸ºÂ `n`Â çš„å®Œå…¨å¹³æ–¹æ•°çš„æœ€å°‘æ•°é‡_**Â ã€‚

**å®Œå…¨å¹³æ–¹æ•°**Â æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œå…¶å€¼ç­‰äºå¦ä¸€ä¸ªæ•´æ•°çš„å¹³æ–¹ï¼›æ¢å¥è¯è¯´ï¼Œå…¶å€¼ç­‰äºä¸€ä¸ªæ•´æ•°è‡ªä¹˜çš„ç§¯ã€‚ä¾‹å¦‚ï¼Œ`1`ã€`4`ã€`9`Â å’ŒÂ `16`Â éƒ½æ˜¯å®Œå…¨å¹³æ–¹æ•°ï¼Œè€ŒÂ `3`Â å’ŒÂ `11`Â ä¸æ˜¯ã€‚
### ä¿¡æ¯:
- **éš¾åº¦**: medium
- **é‡è¦æ€§:** #â˜…â˜…â˜…â˜…â˜†
### æ€è·¯:
- `dp[j] = Math.min(dp[j],dp[j-square]+1)`,å¹³æ–¹æ•°çš„æ›´æ–°é€»è¾‘,ä¸¾ä¾‹è¯´æ˜:
```
i=1æ—¶,å³squqre=1,æ­¤æ—¶
dp[1~12] = 1~12;

i=2æ—¶,å³squqre=4,æ­¤æ—¶
dp[1~4]éƒ½å¯ä»¥ä¸ç”¨æ›´æ–°,å› ä¸º4æ¯”ä»–ä»¬çš„å®¹é‡éƒ½å¤§!
dp[5~12]éƒ½å¯ä»¥æ›´æ–°,å³
	dp[4] = Math.min(dp[4], dp[4 - 4] + 1) = Math.min(4, 0 + 1) = 1
	dp[5] = Math.min(dp[5], dp[5 - 4] + 1) = Math.min(5, 1 + 1) = 2
	dp[6] = Math.min(dp[6], dp[6 - 4] + 1) = Math.min(6, 2 + 1) = 3
	dp[7] = Math.min(dp[7], dp[7 - 4] + 1) = Math.min(7, 3 + 1) = 4
	dp[8] = Math.min(dp[8], dp[8 - 4] + 1) = Math.min(8, 4 + 1) = 2
	dp[9] = Math.min(dp[9], dp[9 - 4] + 1) = Math.min(9, 5 + 1) = 3
	dp[10] = Math.min(dp[10], dp[10 - 4] + 1) = Math.min(10, 6 + 1) = 4
	dp[11] = Math.min(dp[11], dp[11 - 4] + 1) = Math.min(11, 7 + 1) = 5
	dp[12] = Math.min(dp[12], dp[12 - 4] + 1) = Math.min(12, 8 + 1) = 3
	dp[13] = Math.min(dp[13], dp[13 - 4] + 1) = Math.min(13, 9 + 1) = 4
åé¢ä¹ŸåŒç†å¯å¾—!
```

- `if (dp[j-square] != Integer.MAX_VALUE) `,è¿™ä¸ªæ¡ä»¶åˆ¤æ–­æ˜¯ä¸ªé‡ç‚¹,æ˜¯ä¸ºäº†ä¿è¯`dp[j-squqre]`å®è´¨ä¸Šå·²è¢«"åˆå§‹åŒ–",å³**å­˜åœ¨å¯èƒ½çš„ç»„åˆ**;è‹¥`dp[j-squqre]==MAX`,åˆ™ä»£è¡¨æ­¤æ—¶è¿˜ä¸å­˜åœ¨ä»»ä½•ç»„åˆæ»¡è¶³è¦æ±‚.
	- ä½†æ˜¯å¯¹äºæœ¬é¢˜,å®è´¨ä¸Šæ— éœ€è¿™ä¸ªæ¡ä»¶åˆ¤æ–­ä¹Ÿå¯,å› ä¸ºå­˜åœ¨i=1(å¯é‡å¤ä½¿ç”¨),æ‰€ä»¥ä»»æ„`dp[j-squqre]`å®è´¨ä¸Šéƒ½æ˜¯å¯è¾¾çš„!
### ä»£ç :
```java
//leetcode submit region begin(Prohibit modification and deletion)  
class Solution {  
    public int numSquares(int n) {  
        // dp[j]è¡¨ç¤ºç»„æˆjçš„æœ€å°‘å¹³æ–¹æ•°  
        int[] dp = new int[n+1];  
        Arrays.fill(dp, Integer.MAX_VALUE);  
        dp[0] = 0;  
  
        for (int i = 1; i*i <=n;i++) {  
            int square = i * i;  
            System.out.printf("square = %d\n",square);  
            for (int j = square; j <= n; j++) {  
                dp[j] = Math.min(dp[j], dp[j - square] + 1);  
            }  
        }  
        return dp[n];  
    }  
}  
//leetcode submit region end(Prohibit modification and deletion)
```

## 139. å•è¯æ‹†åˆ†
### é¢˜ç›®:
ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸²Â `s`Â å’Œä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨Â `wordDict`Â ä½œä¸ºå­—å…¸ã€‚å¦‚æœå¯ä»¥åˆ©ç”¨å­—å…¸ä¸­å‡ºç°çš„ä¸€ä¸ªæˆ–å¤šä¸ªå•è¯æ‹¼æ¥å‡ºÂ `s`Â åˆ™è¿”å›Â `true`ã€‚

**æ³¨æ„ï¼š** ä¸è¦æ±‚å­—å…¸ä¸­å‡ºç°çš„å•è¯å…¨éƒ¨éƒ½ä½¿ç”¨ï¼Œå¹¶ä¸”å­—å…¸ä¸­çš„å•è¯å¯ä»¥é‡å¤ä½¿ç”¨ã€‚
### ä¿¡æ¯:
- **éš¾åº¦**: meidum
- **é‡è¦æ€§:** #â˜…â˜…â˜…â˜…â˜†
### æ€è·¯:
- `dp[i]`è¡¨ç¤ºå‰iä¸ªå­—ç¬¦èƒ½å¦è¢«å­—å…¸ä¸­çš„å•è¯æ‹¼æ¥.
- å› ä¸ºæ˜¯è¦æ±‚æ’åˆ—é—®é¢˜,æ‰€ä»¥å…ˆéå†èƒŒåŒ…,å†éå†ç‰©å“.
### ä»£ç :
```java
class Solution {  
    public boolean wordBreak(String s, List<String> wordDict) {  
        int n = s.length();  
        boolean[] dp = new boolean[n+1];  
        HashSet<String> set = new HashSet<>(wordDict);  
		dp[0] = true;  // å®šä¹‰ç©ºå­—ç¬¦ä¸²ä¹Ÿå¯æ‹†åˆ†.
        // å®Œå…¨èƒŒåŒ….  
        for (int i = 1; i <= n; i++) {        // èƒŒåŒ….  
            for (int j = 0; j < i; j++) {     // ç‰©å“.  
                String str = s.substring(j,i);  
                if (set.contains(str) && dp[j]) {  
                    dp[i] = true;  
                }  
            }  
        }  
        return dp[n];  
    }  
}  
```
### ä¼˜åŒ–æ—¶ç©ºå¤æ‚åº¦:
```java
class Solution {  
    public boolean wordBreak(String s, List<String> wordDict) {  
        int n = s.length();  
        boolean[] dp = new boolean[n+1];  
        HashSet<String> set = new HashSet<>(wordDict);  
        dp[0] = true;  
  
        int maxLen = 0;  
        for (String word : wordDict) {  
            maxLen = Math.max(maxLen, word.length());  
        }  
  
        // å®Œå…¨èƒŒåŒ….  
        for (int i = 1; i <= n; i++) {        // èƒŒåŒ….  
            for (int j = Math.max(0, i - maxLen); j < i; j++) {    // ç‰©å“.  
                String str = s.substring(j,i);  
                if (set.contains(str) && dp[j]) {  
                    dp[i] = true;  
                    break;  
                }  
            }  
        }  
        return dp[n];  
    }  
}  
```
# èƒŒåŒ…é—®é¢˜æ€»ç»“:
**é€’æ¨å…¬å¼**
> ğŸ‘‰ é—®èƒ½å¦è£…æ»¡èƒŒåŒ…ï¼ˆæˆ–è€…æœ€å¤šè£…å¤šå°‘ï¼‰ï¼š`dp[j] = max(dp[j], dp[j - nums[i]] + nums[i])`
> 
> ğŸ‘‰ é—®è£…æ»¡èƒŒåŒ…å‡ ç§æ–¹æ³•ï¼š`dp[j] += dp[j - nums[i]]`
> 
> ğŸ‘‰ é—®è£…æ»¡èƒŒåŒ…æœ€å¤§ä»·å€¼ï¼š`dp[j] = max(dp[j], dp[j - weight[i]] + value[i])`
> 
> ğŸ‘‰ é—®è£…æ»¡èƒŒåŒ…æœ€å°ä¸ªæ•°ï¼š`dp[j] = min(dp[j], dp[j - coins[i]] + 1)`

**éå†é¡ºåº**

> ğŸ‘‰ 01èƒŒåŒ…  
> äºŒç»´ dp æ•°ç»„ï¼šå…ˆéå†ç‰©å“æˆ–èƒŒåŒ…çš†å¯ï¼Œä¸”ç¬¬äºŒå±‚æ˜¯ä»å°åˆ°å¤§éå†ã€‚  
> ä¸€ç»´ dp æ•°ç»„ï¼šå…ˆéå†ç‰©å“å†éå†èƒŒåŒ…ï¼Œä¸”ç¬¬äºŒå±‚æ˜¯ä»å¤§åˆ°å°éå†ã€‚
> 
> ğŸ‘‰ å®Œå…¨èƒŒåŒ…ï¼ˆä¸€ç»´ dp æ•°ç»„ï¼‰  
> **æ±‚ç»„åˆæ•°ï¼š** å…ˆéå†ç‰©å“å†éå†èƒŒåŒ…ï¼Œä¸”ç¬¬äºŒå±‚æ˜¯ä»å°åˆ°å¤§éå†ã€‚  
> **æ±‚æ’åˆ—æ•°ï¼š** å…ˆéå†èƒŒåŒ…å†éå†ç‰©å“ï¼Œä¸”ç¬¬äºŒå±‚æ˜¯ä»å°åˆ°å¤§éå†ã€‚  
> **æ±‚æœ€å°å€¼ï¼š** å…ˆéå†ç‰©å“æˆ–èƒŒåŒ…çš†å¯ï¼Œä¸”ç¬¬äºŒå±‚æ˜¯ä»å°åˆ°å¤§éå†ã€‚


# æ ‘å½¢DP:
## 377. æ‰“å®¶åŠ«èˆIII
### é¢˜ç›®:

### ä¿¡æ¯:
- **éš¾åº¦**:
- **é‡è¦æ€§:** #â˜…â˜…â˜…â˜…â˜†
### æ€è·¯1:
- é€šè¿‡é€’å½’+è®°å¿†åŒ–æœç´¢æ¥å®ç°,å³åˆ†ä¸ºä¸¤ç§æƒ…å†µ:
	1. é€‰æ‹©rootèŠ‚ç‚¹,åˆ™å„¿å­ä¸èƒ½é€‰,åªèƒ½é€‰å­™å­;
	2. ä¸é€‰æ‹©rootèŠ‚ç‚¹,åˆ™å„¿å­å¯ä»¥é€‰.
- å¯¹äºæ ‘å½¢çš„è®°å¿†åŒ–æœç´¢,åˆ©ç”¨HashMapåšç¼“å­˜.æœ€åé€‰æ‹©ä¸¤ç§æƒ…å†µçš„æœ€å¤§å€¼.
### ä»£ç :
```java
class Solution {  
    HashMap<TreeNode,Integer> map = new HashMap<>();  
    public int rob(TreeNode root){  
        return rob1(root);  
    }  
  
    public int rob1(TreeNode root) {  
        if (root == null) return 0;  
  
        if (map.containsKey(root)) return map.get(root);  
  
        int money = root.val;  
  
        if (root.left != null){  
            money += (rob1(root.left.left)+rob1(root.left.right));  
        }  
        if (root.right != null){  
            money += rob1(root.right.left)+rob1(root.right.right);  
        }  
        int ans = Math.max(money,rob1(root.left)+rob1(root.right));  
        map.put(root,ans);  
        return ans;  
    }  
}  
//leetcode submit region end(Prohibit modification and deletion)
```

### æ€è·¯2:
- åŠ¨æ€è§„åˆ’è¿›è¡Œä¼˜åŒ–,å®šä¹‰äºŒç»´æ•°ç»„`ans`,`ans[0]`å­˜æ”¾æ”¾æ ¹èŠ‚ç‚¹çš„,`ans[1]`å­˜æ”¾ä¸æ”¾æ ¹èŠ‚ç‚¹çš„,è¿™ä¸¤ç§æƒ…å†µå°±ä»£è¡¨äº†å½“å‰èŠ‚ç‚¹çš„ä¸¤ç§æƒ…å†µ!(å–æœ€å¤§å€¼å³ä¸ºå½“å‰èŠ‚ç‚¹çš„æœ€å¤§ä»·å€¼)
- `ans[0] = Math.max(left[0], left[1]) + Math.max(right[0], right[1]);`ä»£è¡¨äº†å½“å‰èŠ‚ç‚¹ä¸å·çš„æƒ…å†µ,è€Œè¿™ç§æƒ…å†µåŒ…å«**å­èŠ‚ç‚¹å·(`[1]`)/ä¸å·(`[0]`)**.
- `ans[1] = left[0] + right[0] + root.val;`ä»£è¡¨äº†å½“å‰èŠ‚ç‚¹å·çš„æƒ…å†µ,å³**æ­¤æ—¶å­èŠ‚ç‚¹ä¸èƒ½å·**!æ‰€ä»¥æ­¤æ—¶åªèƒ½å–`left[0]`ä¸`right[0]`.

```java hl:16-17
class Solution {  
    public int rob(TreeNode root){  
        int[] ans = rob1(root);  
        return Math.max(ans[0],ans[1]);  
    }  
  
    public int[] rob1(TreeNode root) {  
        int[] ans = new int[]{0,0};  
        // åˆ°åº•,è¿”å›.  
        if (root == null) return ans;  
        // å­˜å‚¨ ä¸æ”¾æ ¹èŠ‚ç‚¹+æ”¾æ ¹èŠ‚ç‚¹  
        // å·¦å„¿å­,å³å„¿å­  
        int[] left = rob1(root.left);  
        int[] right = rob1(root.right);  
  
        ans[0] = Math.max(left[0], left[1]) + Math.max(right[0], right[1]);   //ä¸æ”¾æ ¹èŠ‚ç‚¹: å„¿å­å·!  
        ans[1] = left[0] + right[0] + root.val;  // æ”¾æ ¹èŠ‚ç‚¹: å„¿å­ä¸å·+æ ¹èŠ‚ç‚¹  
  
        return ans;  
    }  
}
```


# è‚¡ç¥¨é—®é¢˜:
**åˆå§‹åŒ–é€»è¾‘:** 
- **ç¬¬`j`æ¬¡äº¤æ˜“ä¸æŒè‚¡çš„çŠ¶æ€**åˆå§‹åŒ–ä¸º:`Integer.MIN_VALUE`,ä»¥ä¾¿äºåé¢ä¹°å…¥æ—¶æ›´æ–°.
	- `dp[j][1]=Integer.MIN_VALUE`
- **ç¬¬`j`æ¬¡äº¤æ˜“æŒè‚¡çš„çŠ¶æ€**åˆå§‹åŒ–ä¸º`0`,å³ä¸æŒè‚¡æ—¶æ²¡æœ‰ä»»ä½•æ”¶ç›Š
	- `dp[j][0]=0`
**éå†é¡ºåº:**
- `for (int i = 0; i < n; i++)`:å³
## 121. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº
### é¢˜ç›®:
ä½ åªèƒ½é€‰æ‹©Â **æŸä¸€å¤©**Â ä¹°å…¥è¿™åªè‚¡ç¥¨ï¼Œå¹¶é€‰æ‹©åœ¨Â **æœªæ¥çš„æŸä¸€ä¸ªä¸åŒçš„æ—¥å­**Â å–å‡ºè¯¥è‚¡ç¥¨ã€‚è®¾è®¡ä¸€ä¸ªç®—æ³•æ¥è®¡ç®—ä½ æ‰€èƒ½è·å–çš„æœ€å¤§åˆ©æ¶¦ã€‚

è¿”å›ä½ å¯ä»¥ä»è¿™ç¬”äº¤æ˜“ä¸­è·å–çš„æœ€å¤§åˆ©æ¶¦ã€‚å¦‚æœä½ ä¸èƒ½è·å–ä»»ä½•åˆ©æ¶¦ï¼Œè¿”å›Â `0`Â ã€‚
### ä¿¡æ¯:
- **éš¾åº¦**: easy
- **é‡è¦æ€§:** #â˜…â˜…â˜…â˜†â˜†
### æ€è·¯1:
- æŒç»­æ›´æ–°æœ€å°æˆæœ¬ä½œä¸ºä¹°å…¥ä»·æ ¼,éå†æ‰€æœ‰`price[i]`è®¡ç®—åˆ©æ¶¦.
### ä»£ç 1:
```java
class Solution {
    public int maxProfit(int[] prices) {
        int ans = 0;
        int minPrice = prices[0];
        for (int p : prices) {
            ans = Math.max(ans, p - minPrice);
            minPrice = Math.min(minPrice, p);
        }
        return ans;
    }
}
```

### æ€è·¯2:
- å‰iå¤©åˆ†åˆ«æœ‰ä¸¤ç§çŠ¶æ€:æŒæœ‰è‚¡ç¥¨å’Œä¸æŒæœ‰è‚¡ç¥¨,æ‰€ä»¥`dp[i][j]`è¡¨ç¤ºä¸‹æ ‡ä¸ºÂ `i`Â è¿™ä¸€å¤©ç»“æŸçš„æ—¶å€™ï¼Œæ‰‹ä¸ŠæŒè‚¡çŠ¶æ€ä¸ºÂ `j`Â æ—¶ï¼Œæˆ‘ä»¬æŒæœ‰çš„ç°é‡‘æ•°ã€‚
	- `dp[i][0]`:è¡¨ç¤ºç¬¬iå¤©,ä¸æŒæœ‰è‚¡ç¥¨æ—¶,æŒæœ‰çš„ç°é‡‘æ•°.
	- `dp[i][1]`:è¡¨ç¤ºç¬¬iå¤©,æŒæœ‰è‚¡ç¥¨æ—¶,æŒæœ‰çš„ç°é‡‘æ•°.
- å°†`dp[i][1]`åˆå§‹åŒ–ä¸º`-price[i]`,è¿™æ ·èƒ½ä¿è¯åœ¨è®¡ç®—åˆ©æ¶¦æ—¶,å³`prices[i] + dp[i-1][1]`,èƒ½æ›´æ–¹ä¾¿è·å–ä¹°å…¥ä»·æ ¼.
### ä»£ç 2:
```java
class Solution {  
    public int maxProfit(int[] prices) {  
        int n = prices.length;  
        // dp[i][0]è¡¨ç¤ºç¬¬iå¤©ä¸æŒæœ‰è‚¡ç¥¨æ‰€å¾—æœ€å¤šç°é‡‘.  
        // dp[i][1]è¡¨ç¤ºç¬¬iå¤©æŒæœ‰è‚¡ç¥¨æ‰€å¾—æœ€å¤šç°é‡‘.  
        int[][] dp = new int[n][2];  
        dp[0][0] = 0;  
        dp[0][1] = -prices[0];  
        //int ans = 0;  
        for (int i = 1; i < n; i++) {  
            dp[i][0] = Math.max(prices[i] + dp[i-1][1],dp[i-1][0]);  
            dp[i][1] = Math.max(dp[i-1][1], -prices[i]);   //æŒç»­è·å–æœ€ä½ä¹°å…¥ä»·æ ¼.
        }  
        return Math.max(dp[n-1][0],dp[n-1][1]);  
    }  
}
```

## 122. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºII
### é¢˜ç›®:
ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„Â `prices`Â ï¼Œå…¶ä¸­Â `prices[i]`Â è¡¨ç¤ºæŸæ”¯è‚¡ç¥¨ç¬¬Â `i`Â å¤©çš„ä»·æ ¼ã€‚

åœ¨æ¯ä¸€å¤©ï¼Œä½ å¯ä»¥å†³å®šæ˜¯å¦è´­ä¹°å’Œ/æˆ–å‡ºå”®è‚¡ç¥¨ã€‚ä½ åœ¨ä»»ä½•æ—¶å€™Â **æœ€å¤š**Â åªèƒ½æŒæœ‰Â **ä¸€è‚¡**Â è‚¡ç¥¨ã€‚ä½ ä¹Ÿå¯ä»¥å…ˆè´­ä¹°ï¼Œç„¶ååœ¨Â **åŒä¸€å¤©**Â å‡ºå”®ã€‚

è¿”å›Â _ä½ èƒ½è·å¾—çš„Â **æœ€å¤§**Â åˆ©æ¶¦_Â ã€‚
### ä¿¡æ¯:
- **éš¾åº¦**: medium
- **é‡è¦æ€§:** #â˜…â˜…â˜…â˜…â˜†
### æ€è·¯:
- ä¸[[#121. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœº]]æ€è·¯ä¸€è‡´,ä¸è¿‡è¿™é‡Œçš„çŠ¶æ€è½¬ç§»(é€’æ¨å…¬å¼)ä¸å¤ªä¸€æ ·:
- `dp[i][0]`:å½“å¤©ä¸æŒæœ‰è‚¡ç¥¨çš„æƒ…å†µ,æ­¤æ—¶å¯èƒ½ä¸º 
	 **1)å‰ä¸€å¤©æŒæœ‰,å½“å¤©å–å‡º; 2)å‰ä¸€å¤©ä¸æŒæœ‰,å½“å¤©ç»§ç»­ä¸æŒæœ‰,åˆ©æ¶¦ä¸å‰ä¸€å¤©ç›¸åŒ**
- `dp[i][1]`:å½“å¤©æŒæœ‰è‚¡ç¥¨çš„æƒ…å†µ,æ­¤æ—¶å¯èƒ½ä¸º
	 **1)å‰ä¸€å¤©æŒæœ‰,ä»Šå¤©ç»§ç»­æŒæœ‰,åˆ©æ¶¦ä¸å˜; 2)å‰ä¸€å¤©ä¸æŒæœ‰(æ­¤æ—¶å¯èƒ½æœ‰åˆ©æ¶¦),ä»Šå¤©ä¹°å…¥,éœ€è¦å‡å»ä¹°å…¥ä»·æ ¼**
```java
// price[i]+dp[i-1][1]:å‰ä¸€å¤©æŒæœ‰,ä»Šå¤©å–å‡º;
// dp[i-1][0]:ç»§ç»­ä¸æŒæœ‰
dp[i][0] = Math.max(prices[i] + dp[i-1][1],dp[i-1][0]);

// dp[i-1][1]:ä»Šå¤©ç»§ç»­æŒæœ‰
// dp[i-1][0] - price[i]:å‰i-1å¤©çš„åˆ©æ¶¦+ä»Šå¤©çš„ä¹°å…¥ä»·æ ¼
dp[i][1] = Math.max(dp[i-1][1],dp[i-1][0]-prices[i]);
```
### ä»£ç :
```java
class Solution {  
    public int maxProfit(int[] prices) {  
        int n = prices.length;  
        int ans = 0;  
        //dp[i][0]:å‰iå¤©ä¸æŒæœ‰è‚¡ç¥¨  
        //dp[i][1]:å‰iå¤©æŒæœ‰è‚¡ç¥¨  
        int[][] dp = new int[n][2];  
        dp[0][1] = -prices[0];  
        for (int i = 1; i < n; i++) {  
            // ä¸æŒæœ‰:æ¯”è¾ƒ 1ï¼‰å–å‡ºï¼›2ï¼‰ç»§ç»­ä¸æŒæœ‰  
            dp[i][0] = Math.max(prices[i] + dp[i-1][1],dp[i-1][0]);  
            // æŒæœ‰  
            dp[i][1] = Math.max(dp[i-1][1],dp[i-1][0]-prices[i]);  
        }  
        return dp[n-1][0];  
    }  
}

```
### ä»£ç 2:(ä¸€ç»´æ•°ç»„ä¼˜åŒ–)
```java
class Solution {  
    public int maxProfit(int[] prices) {  
        int n = prices.length;  
        int ans = 0;  
        //dp[i][0]:å‰iå¤©ä¸æŒæœ‰è‚¡ç¥¨  
        //dp[i][1]:å‰iå¤©æŒæœ‰è‚¡ç¥¨  
        int[] dp = new int[2];  
        dp[1] = Integer.MIN_VALUE;  
        for (int i = 0; i < n; i++) {  
            // ä¸æŒæœ‰:æ¯”è¾ƒ 1ï¼‰å–å‡ºï¼›2ï¼‰ç»§ç»­ä¸æŒæœ‰  
            dp[0] = Math.max(dp[0], dp[1]+prices[i]);  
            // æŒæœ‰  
            dp[1] = Math.max(dp[1], dp[0]-prices[i]);  
        }  
        return dp[0];  
    }  
}
```

## 123. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºIII
### é¢˜ç›®:
ç»™å®šä¸€ä¸ªæ•°ç»„ï¼Œå®ƒçš„ç¬¬Â `i`Â ä¸ªå…ƒç´ æ˜¯ä¸€æ”¯ç»™å®šçš„è‚¡ç¥¨åœ¨ç¬¬Â `i`Â å¤©çš„ä»·æ ¼ã€‚

è®¾è®¡ä¸€ä¸ªç®—æ³•æ¥è®¡ç®—ä½ æ‰€èƒ½è·å–çš„æœ€å¤§åˆ©æ¶¦ã€‚ä½ æœ€å¤šå¯ä»¥å®ŒæˆÂ **ä¸¤ç¬”**Â äº¤æ˜“ã€‚

**æ³¨æ„ï¼š**ä½ ä¸èƒ½åŒæ—¶å‚ä¸å¤šç¬”äº¤æ˜“ï¼ˆä½ å¿…é¡»åœ¨å†æ¬¡è´­ä¹°å‰å‡ºå”®æ‰ä¹‹å‰çš„è‚¡ç¥¨ï¼‰ã€‚
### ä¿¡æ¯:
- **éš¾åº¦**: hard
- **é‡è¦æ€§:** #â˜…â˜…â˜…â˜…â˜…
### æ€è·¯:
- å› ä¸ºé™åˆ¶äº†åªèƒ½ä¹°å…¥ä¸¤æ¬¡,æ‰€ä»¥åœ¨[[#122. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºII]]çš„åŸºç¡€ä¸Š**å†å¢åŠ ä¸€ä¸ªç»´åº¦**æ¥è®°å½•ä¹°å–æ¬¡æ•°,å³`dp[i][j][k]`.
- **é€’æ¨å…¬å¼:**
	- 
- `return Math.max(dp[1][0],dp[2][0])`:ä¿è¯ä»…æœ‰ä¸€æ¬¡äº¤æ˜“æ—¶,ä¹Ÿèƒ½è¿”å›æ­£ç¡®çš„ç­”æ¡ˆ.
### ä»£ç :
```java
class Solution {  
    public int maxProfit(int[] prices) {  
        int n = prices.length;  
        // j=0,1,2:è¡¨ç¤ºæœªæ“ä½œ,ä¹°å…¥è¿‡1æ¬¡,ä¹°å…¥è¿‡2æ¬¡;  
        // k=0,1:è¡¨ç¤ºæ˜¯å¦æŒè‚¡.  
        int[][][] dp = new int[n][3][2];  
        dp[0][1][1] = -prices[0];  
        dp[0][2][1] = Integer.MIN_VALUE;  
        for (int i = 1; i < n; i++) {  
            // 1)ä»Šå¤©å–å‡º(å‰ä¸€å¤©æŒè‚¡); 2)ä»Šå¤©ä»ä¸æŒè‚¡  
            dp[i][1][0] = Math.max(dp[i-1][1][1]+prices[i],dp[i-1][1][0]);  
            // 1)ä»Šå¤©ä»æŒè‚¡,ä¸å˜; 2)ä»Šå¤©ç¬¬ä¸€æ¬¡ä¹°å…¥  
            dp[i][1][1] = Math.max(-prices[i],dp[i-1][1][1]);  
            // ç¬¬äºŒæ¬¡(ä¸æŒè‚¡): 1)ä»Šå¤©å–å‡º ;2)å‰é¢ä¸æŒè‚¡+ä»ä¸æŒè‚¡.  
            dp[i][2][0] = Math.max(dp[i-1][2][1]+prices[i],dp[i-1][2][0]);  
            // ç¬¬äºŒæ¬¡(æŒè‚¡): 1)ä¹°å…¥; 2)ç»§ç»­æŒè‚¡  
            dp[i][2][1] = Math.max(dp[i-1][1][0]-prices[i],dp[i-1][2][1]);  
        }  
        return Math.max(dp[n-1][1][0],dp[n-1][2][0]);  
    }  
}

```

### ä»£ç 2:æ»šåŠ¨æ•°ç»„ä¼˜åŒ–:
```java
class Solution {  
    public int maxProfit(int[] prices) {  
        int n = prices.length;  
        // j=0,1,2:è¡¨ç¤ºæœªæ“ä½œ,ä¹°å…¥è¿‡1æ¬¡,ä¹°å…¥è¿‡2æ¬¡;  
        // k=0,1:è¡¨ç¤ºæ˜¯å¦æŒè‚¡.  
        int[][][] dp = new int[2][3][2];  
        dp[0][1][1] = -prices[0];  
        dp[0][2][1] = Integer.MIN_VALUE;  
        for (int i = 1; i < n; i++) {  
            // 1)ä»Šå¤©å–å‡º(å‰ä¸€å¤©æŒè‚¡); 2)ä»Šå¤©ä»ä¸æŒè‚¡  
            dp[i%2][1][0] = Math.max(dp[(i-1)%2][1][1]+prices[i],dp[(i-1)%2][1][0]);  
            // 1)ä»Šå¤©ä»æŒè‚¡,ä¸å˜; 2)ä»Šå¤©ç¬¬ä¸€æ¬¡ä¹°å…¥  
            dp[i%2][1][1] = Math.max(-prices[i],dp[(i-1)%2][1][1]);  
            // ç¬¬äºŒæ¬¡(ä¸æŒè‚¡): 1)ä»Šå¤©å–å‡º ;2)å‰é¢ä¸æŒè‚¡+ä»ä¸æŒè‚¡.  
            dp[i%2][2][0] = Math.max(dp[(i-1)%2][2][1]+prices[i],dp[(i-1)%2][2][0]);  
            // ç¬¬äºŒæ¬¡(æŒè‚¡): 1)ä¹°å…¥; 2)ç»§ç»­æŒè‚¡  
            dp[i%2][2][1] = Math.max(dp[(i-1)%2][1][0]-prices[i],dp[(i-1)%2][2][1]);  
        }  
        return Math.max(dp[(n-1)%2][1][0],dp[(n-1)%2][2][0]);  
    }  
}
```
### ä»£ç 3:ä½¿ç”¨äºŒç»´æ•°ç»„(å½“å¤©çš„å€¼ä¹‹ä¸å‰ä¸€å¤©çš„å€¼ç›¸å…³)
```java
class Solution {  
    public int maxProfit(int[] prices) {  
        int n = prices.length;  
        // j=0,1,2:è¡¨ç¤ºæœªæ“ä½œ,ä¹°å…¥è¿‡1æ¬¡,ä¹°å…¥è¿‡2æ¬¡;  
        // k=0,1:è¡¨ç¤ºæ˜¯å¦æŒè‚¡.  
        int[][] dp = new int[3][2];  
        //dp[1][1] = -prices[0];  
        dp[1][1] = Integer.MIN_VALUE;  
        dp[2][1] = Integer.MIN_VALUE;  
        for (int i = 0; i < n; i++) {  
            // 1)ä»Šå¤©å–å‡º(å‰ä¸€å¤©æŒè‚¡); 2)ä»Šå¤©ä»ä¸æŒè‚¡  
            dp[1][0] = Math.max(dp[1][1]+prices[i],dp[1][0]);  
            // 1)ä»Šå¤©ä»æŒè‚¡,ä¸å˜; 2)ä»Šå¤©ç¬¬ä¸€æ¬¡ä¹°å…¥  
            dp[1][1] = Math.max(-prices[i],dp[1][1]);  
            // ç¬¬äºŒæ¬¡(ä¸æŒè‚¡): 1)ä»Šå¤©å–å‡º ;2)å‰é¢ä¸æŒè‚¡+ä»ä¸æŒè‚¡.  
            dp[2][0] = Math.max(dp[2][1]+prices[i],dp[2][0]);  
            // ç¬¬äºŒæ¬¡(æŒè‚¡): 1)ä¹°å…¥; 2)ç»§ç»­æŒè‚¡  
            dp[2][1] = Math.max(dp[1][0]-prices[i],dp[2][1]);  
        }  
        return Math.max(dp[1][0],dp[2][0]);  
    }  
}
```
## 188. ä¹°å–è‚¡ç¥¨çš„æœ€ä½³æ—¶æœºIV
### é¢˜ç›®:
ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„Â `prices`Â å’Œä¸€ä¸ªæ•´æ•°Â `k`Â ï¼Œå…¶ä¸­Â `prices[i]`Â æ˜¯æŸæ”¯ç»™å®šçš„è‚¡ç¥¨åœ¨ç¬¬Â `i`Â å¤©çš„ä»·æ ¼ã€‚

è®¾è®¡ä¸€ä¸ªç®—æ³•æ¥è®¡ç®—ä½ æ‰€èƒ½è·å–çš„æœ€å¤§åˆ©æ¶¦ã€‚ä½ æœ€å¤šå¯ä»¥å®ŒæˆÂ `k`Â ç¬”äº¤æ˜“ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ æœ€å¤šå¯ä»¥ä¹°Â `k`Â æ¬¡ï¼Œå–Â `k`Â æ¬¡ã€‚

**æ³¨æ„ï¼š**ä½ ä¸èƒ½åŒæ—¶å‚ä¸å¤šç¬”äº¤æ˜“ï¼ˆä½ å¿…é¡»åœ¨å†æ¬¡è´­ä¹°å‰å‡ºå”®æ‰ä¹‹å‰çš„è‚¡ç¥¨ï¼‰ã€‚
### ä¿¡æ¯:
- **éš¾åº¦**: hard
- **é‡è¦æ€§:** #â˜…â˜…â˜…â˜…â˜…
### æ€è·¯:
- ä½¿ç”¨äºŒç»´æ•°ç»„è¿›è¡Œä¼˜åŒ–,å› ä¸ºå½“å¤©çš„å€¼åªä¸å‰ä¸€å¤©çš„å€¼æœ‰å…³,æ‰€ä»¥å¯ä»¥**é€šè¿‡çŠ¶æ€å‹ç¼©æ¥èŠ‚çœå†…å­˜ç©ºé—´.** å…·ä½“è€Œè¨€å°±æ˜¯åœ¨å¾ªç¯ä¸­ä¸æ–­æ›´æ–°`dp[j][1/0]`!
- æ›´è¿›ä¸€æ­¥çš„ä¼˜åŒ–,æºäºChatGPTçš„æ€è·¯,è§ä»£ç 2.
- **åˆå§‹åŒ–: å°†ç¬¬ä¸€æ¬¡ä¹°å…¥çš„ä»·æ ¼ç½®ä¸ºæœ€å°å€¼,ä¾¿äºåé¢çš„æ›´æ–°.**
- **æ ¹æœ¬çš„é€’æ¨æ€è·¯éƒ½æ²¡å˜**:(jè¡¨ç¤ºäº¤æ˜“æ¬¡æ•°)
	- **æŒè‚¡æ—¶:** 1)å‰ä¸€å¤©ä¸æŒè‚¡+ä»Šå¤©ä¹°å…¥; 2)å‰ä¸€å¤©æŒè‚¡,ä»Šå¤©ç»§ç»­æŒè‚¡;
		- `dp[j][1] = Math.max(dp[j-1][0]-prices[i-1],dp[j][1])`
			- **ä»Šå¤©ä¹°å…¥,æ­¤æ—¶å¯¹åº”å‰ä¸€å¤©åº”è¯¥æ˜¯ç¬¬j-1æ¬¡äº¤æ˜“!**
	- **ä¸æŒè‚¡æ—¶:** 1)å‰ä¸€å¤©æŒè‚¡,ä»Šå¤©å–å‡º; 2)å‰ä¸€å¤©ä¸æŒè‚¡+ä»Šå¤©ç»§ç»­ä¸æŒè‚¡;
		- `dp[j][0] = Math.max(dp[j][1]+price[i-1],dp[j][0])`
### ä»£ç 1:
```java hl:13,14
class Solution {  
    public int maxProfit(int k, int[] prices) {  
        int n = prices.length;  
  
        int[][] dp = new int[k+1][2];  
        for (int i = 0; i <= n; i++) {  
            for (int j = 0; j <= k; j++) {  
                dp[j][1] = Integer.MIN_VALUE;  
            }  
        }  
        for (int i = 1; i <= n; i++) {  
            for (int j = 1; j <= k; j++) {  
                dp[j][1] = Math.max(dp[j][1], dp[j - 1][0] - prices[i - 1]);  
                dp[j][0] = Math.max(dp[j][0], dp[j][1] + prices[i - 1]);  
            }  
        }  
        // è¯´æ˜ï¼šç¬¬ä¸€ç»´å’Œç¬¬äºŒç»´çŠ¶æ€éƒ½å…·æœ‰å‰ç¼€æ€§è´¨çš„ï¼Œè¾“å‡ºæœ€åä¸€ä¸ªçŠ¶æ€å³å¯  
        return dp[k][0];  
    }  
}
```
### ä»£ç 2:
```java hl:17-18
class Solution {  
    public int maxProfit(int k, int[] prices) {  
        int n = prices.length;  
        if (n == 0 || k == 0) return 0;  
        // dp[j][0]ï¼šç¬¬jæ¬¡äº¤æ˜“åï¼Œä¸æŒè‚¡çš„æœ€å¤§åˆ©æ¶¦  
        // dp[j][1]ï¼šç¬¬jæ¬¡äº¤æ˜“åï¼ŒæŒè‚¡çš„æœ€å¤§åˆ©æ¶¦  
        int[] dp0 = new int[k + 1];  // dp[j][0] ç®€åŒ–ä¸º dp0[j]        
        int[] dp1 = new int[k + 1];  // dp[j][1] ç®€åŒ–ä¸º dp1[j]  
        // åˆå§‹åŒ– dp1 æ•°ç»„ä¸ºæœ€å°å€¼ï¼Œå› ä¸ºå¼€å§‹æ—¶æˆ‘ä»¬è¿˜æ²¡æœ‰è¿›è¡Œä»»ä½•äº¤æ˜“  
        for (int j = 0; j <= k; j++) {  
            dp1[j] = Integer.MIN_VALUE;  
        }  
  
        for (int price : prices) {  
            for (int j = 1; j <= k; j++) {  
                dp1[j] = Math.max(dp1[j], dp0[j - 1] - price); // ä¹°å…¥  
                dp0[j] = Math.max(dp0[j], dp1[j] + price);     // å–å‡º  
            }  
        }  
        return dp0[k];  
    }  
}
```

### å‰ªææ“ä½œ:
- å¦‚æœå¯äº¤æ˜“æ¬¡æ•°å¤§äºäº¤æ˜“å¤©æ•°çš„ä¸€åŠ,åˆ™å¯ä»¥ç´¯åŠ æ‰€ä»¥çš„æ­£åˆ©æ¶¦
	- ä¾‹å¦‚:`[1,2,3,4,5,6],k=3`,æœ€å¤§åˆ©æ¶¦ä¸º5,å¯é€šè¿‡ç´¯åŠ è·å¾—!
```java
if (k >= n / 2) {  
    // å¦‚æœå¯ä»¥è¿›è¡Œçš„äº¤æ˜“æ¬¡æ•°å¤§äºç­‰äºå¯äº¤æ˜“çš„å¤©æ•°çš„ä¸€åŠï¼Œä½¿ç”¨è´ªå¿ƒæ³•  
    int maxProfit = 0;  
    for (int i = 1; i < n; i++) {  
        if (prices[i] > prices[i - 1]) {  
            maxProfit += prices[i] - prices[i - 1]; // ç´¯åŠ æ‰€æœ‰æ­£åˆ©æ¶¦  
        }  
    }  
    return maxProfit;  
}
```