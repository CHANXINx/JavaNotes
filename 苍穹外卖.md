# Day01
## 前端环境搭建
1. 运行nginx,实现**端口转发**和反向代理:通过此配置可以将前端请求转发到后端服务.
## 后端环境搭建
### 1. 导入工程,各模块具体作用及介绍:
![[SkyTakeout_ModulesRole.png]]
- **Common类存放的子模块及作用:**
	  存放公共类,可供其他模块使用,例如exception,enumeration,utils等.
	- Pojo类存放的子模块及作用:
	  存放entity,DTO,VO模块.![[SkyTakeout_PojoModulesRole.png]]
		- DTO:Data Transfer Object,用于前端和后端传输数据时所用的对象,即用于**层与层之间的数据传输**.
		- VO:View Object,用于表示不可变的数据集合，不涉及持久化,是为前端展示数据所使用的对象.
		- PO:Persistent Object,用于数据库持久化,与数据库表的字段具有一一映射的关系,只有属性和getter,setter方法.
- **Server类的子模块及作用:**
  存放配置文件,配置类,拦截器,controller,service,mapper和启动类等.
### 2. Git远程仓库的创建:
- IDEA中: VCS→Create Git Repository,创建git本地仓库;
- Commit`-o-`: 将文件提交到本地仓库;
- 创建Github远程仓库,复制SSH链接.先在IEDA中push→Define Remote,然后复制SSH链接,将Git本地仓库与Github上的远程仓库进行连接;
- 将Commit的文件推送到远程仓库.
### 3. 数据库导入:
- 导入sky.sql.
### 4. 运行项目:
- application.yaml配置文件中,将数据库的用户名与密码修改成自己的;启动nginx服务;运行sky-server中的启动类;访问localhost/login页面并登录.
---
>**思考:前端发送的请求是如何请求到后端服务的?前端请求地址与后端接口地址并不完全一致,这是为什么?
- 通过**nginx反向代理**实现,将前端发送的动态请求由nginx转发到后端服务器.
- nginx的优点有: 1)**提高访问速度**,**nginx可以缓存后端服务器的响应结果**,当同样的前端请求到达时,可以直接返回缓存结果,而无需再次请求后端服务器; 2)负载均衡,将大量请求均衡分配给集群中的每台服务器;3)保证后端服务安全,集群部署在内网,对外只开放nginx服务器,隐藏了后端服务器的实际IP地址和端口.
---
- **nginx的配置:**
	**反向代理:**
```nginx
server{
    listen 80;
    server_name localhost;
    
    location /api/{
        proxy_pass http://localhost:8080/admin/; #反向代理
    }
}
```
其中,listen代表监听的端口; server_name代表需要处理的主机名或域名; location代表匹配路径,即`~/api/`的请求都会被处理,并转发到反向代理的路径proxy_pass
	**负载均衡:**
```
upstream webservers{
    server 192.168.100.128:8080;
    server 192.168.100.129:8080;
}
server{
    listen 80;
    server_name localhost;
    
    location /api/{
        proxy_pass http://webservers/admin; #负载均衡
    }
}
```
代表前端请求会被转发到两台server服务器中,并且默认配置为轮询.

**负载均衡策略:**![[SkyTakeout_LoadBalance.png]]

### 5. 登录功能完善:(增加MD5加密)
1. 修改数据库明文密码为MD5加密后的密文;
2. 修改Java代码,将前端提交的密码经MD5加密后与数据库中的密文进行比对:
	`password = DigestUtils.md5DigestAsHex(password.getBytes());`
### 6. 导入接口文档:
1. 将json格式的接口文件导入Yapi接口管理平台(设计阶段使用).
2. 后端接口文档生成及接口测试:(**Swagger**(开发阶段使用)→Knife4j(MVC框架集成Swagger的增强方案)) 
	1) 导入Maven坐标;
	2) MvcConfig中加入Knife4j配置:
	**WebMvcConfiguration.java**
```java
/**
     * 通过knife4j生成接口文档
     * @return
*/
    @Bean
    public Docket docket() {
        ApiInfo apiInfo = new ApiInfoBuilder()
                .title("苍穹外卖项目接口文档")
                .version("2.0")
                .description("苍穹外卖项目接口文档")
                .build();
        Docket docket = new Docket(DocumentationType.SWAGGER_2)
                .apiInfo(apiInfo)
                .select()
                .apis(RequestHandlerSelectors.basePackage("com.sky.controller"))
                .paths(PathSelectors.any())
                .build();
        return docket;
    }

```

	3) 设置静态资源映射: 
```java
/**
	 * 设置静态资源映射
	 * @param registry
*/
		protected void addResourceHandlers(ResourceHandlerRegistry registry) {
				registry.addResourceHandler("/doc.html").addResourceLocations("classpath:/META-INF/resources/");
		        registry.addResourceHandler("/webjars/**").addResourceLocations("classpath:/META-INF/resources/webjars/");
		}
```
- Knife4j常用注解介绍:![[SkyTakeout_knife4jAnno.png]]

# Day02:
## 新增员工
### 1. 需求分析:
- 根据产品原型分析需求;
- 设计接口:明确新增员工接口的**请求路径、请求方式、请求参数、返回数据**。
- 设计表.
### 2. 代码开发:
- 设计DTO类:当前端提交的数据和实体类中对应的属性差别比较大时,建议使用DTO来封装数据.
	- 由于上述**传入参数和实体类有**较大差别，所以自定义DTO类。
### 3. 功能测试:
测试方法: 1)前后端联调测试; 2)接口文档测试.
### 4. 代码完善:
