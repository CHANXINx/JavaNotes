## 简历亮点
### 组件封装
- 自定义统一异常处理，实现Controller层、RPC服务层的异常的统一处理
- 基于AOP+自定义注解，实现通用的RPC请求处理，用于通用的参数校验及响应封装。
- 自定义通用状态机模型，实现复杂状态的流转控制。
- 统一异常体系，并实现Controller/RPC的统一异常处理。
- 基于AOP+自定义注解+Redisson实现一套分布式锁注解，减少重复代码，降低出错。
- 自定义多Key分片算法，用于订单、支付等多场景的分库分表。
## 统一入参与出参

![[Pasted image 20241229024624.png|200]]
**统一出参：**
```java
import java.io.Serializable;
@Setter
@Getter
public class BaseResponse implements Serializable {
    private static final long serialVersionUID = 1L;

    private Boolean success;

    private String responseCode;

    private String responseMessage;
}
```

注意，字段使用success，且为包装类！有以下两个好处：
1. 此时错误的返回值为null而不是false，**避免了二义性**。  
2. 此时getter方法为getSuccess，符合bean规范【即在字段名前面＋set/get】，避免了RPC框架的序列化出错。

若采用isSuccess作为字段，则自动生成的getter和setter方法会如下图所示，与Bean规范不符。Bean规范要求getter与setter方法为**字段前面+set/get**。
![[Pasted image 20241230011955.png|300]]

定义统一入参出参的好处是：
1. 具体业务的入参和出参，只需要继承这两个基类，然后定义好自己的业务字段就行了，不需要关注非业务相关字段了。

## 统一RPC
被调用方会进行统一参数校验、接口耗时统计、日志打印，方便快速进行问题定位与排查，以及后续的问题监控。

**统一参数校验：**
- 通过自定义切面注解，通过ProceedingJoinPoint获取方法签名参数，并通过BeanValidator实现每个参数的校验，若校验失败，则打印日志，抛出异常，返回失败信息。
- **优点**：
	- fail-fast机制，参数错误直接返回，无需进行后续处理。

## 统一Controller异常拦截
>`GlobalWebExceptionHandler`

将所有异常在Controller捕获，并返回给前端合适的错误信息以及错误码，而不是返回异常信息！