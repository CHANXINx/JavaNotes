## 倒排索引是什么？
传统的索引是

## 如何保持MySQL和ES的一致性？
### 方案一：同步更新MySQL和ES
在事务内同步更新MySQL和ES。通过事务来保证MySQL和ES的一致性。
**优点：**
1. 改造简单，实时性强。

**缺点：**
1. 如果更新ES超时，但实质上更新成功了，可能导致MySQL的更新被回滚，从而出现数据不一致的情况。
2. 在事务中引入了外部调用，会导致拖长事务，占用数据库的连接，影响吞吐量。
### 方案二：基于MQ更新ES
可以在需要更新数据库和ES时，分别发送两个消息，然后MySQL和ES分别监听，并进行更新。
或者，可以是需要更新ES时，异步发送消息更新ES，并基于本地消息表保证一致性。

**优点：**
1. 解耦，异步，提升整体性能。

**缺点：**
1. MQ有延迟，并且需要引入新的中间件。
### 方案三：定时任务扫表
可以通过定时任务扫表，批量更新ES。

**优点：**
1. 对代码没有侵入性，无需改造原有代码。

**缺点：**
2. 实时性差，并且会对数据库造成压力。

### 方案四：基于Binlog监听【推荐】
监听Binlog来更新ES。

