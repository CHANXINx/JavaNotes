## 1. 实现了基于权限控制的公告阅读状态追踪功能，精确统计教师管理班级中学生的公告未读情况。
#### 需求背景
- 传统公告发布后，无法确认学生是否真正阅读了公告，无法统计公告的实际触达率和阅读情况，缺乏有效手段跟踪重要通知的传达效果。通过这点功能，我们可以实现在学生未阅读重要公告时，进行手动消息提醒，例如发送邮件、打电话等。
- 同时，由于我们系统中有多种角色：教师、管理员、助教、学生。因此，我们要对权限进行控制，避免出现水平越权问题，例如教师查看了其他班级的公告阅读状态。
- 提供看板，可以帮助管理员/教师查看
#### 数据模型
##### AnnouncementModel
用于记录公告的基本信息，如属于哪个班级、由谁创建的、公告标题、公告内容、公告日期、被查看次数、附件链接等。
##### AnnouncementReadModel
用于记录公告的阅读状态，包含字段：userId、公告Id、阅读时间。与Announcement表通过公告ID进行关联。
##### AdminModel
用户模型，定义用户在课程中的权限。包含字段：ocId、userId、permissionGroupId、entered、createTime、updateTime
#### 技术实现
- 阅读公告 ： POST /announcement/read
- 获取公告详情 ： GET /announcements/{announcementId}
- 查看阅读详情 ： GET /announcement/read/detail （需要教师权限）
- 获取未读消息数 ： GET /message/unread/count
##### 获取用户在当前公告中的权限`getAuthorityInfo`
查询公告表和用户表，通过用户的userId和ocId就可以判断当前用户在当前公告中的权限。
```SQL
SELECT
ot.id,ot.ocid as ocId,ot.userid as userId,ot.permissiongroupid as permissionGroupId 
FROM c_ocadmin_tab ot inner 
JOIN t_announcement_tab att 
ON ot.ocid = att.ocid 
WHERE
att.announcementid = #{announcementId} and ot.userid = #{userId}
```
##### 记录用户阅读当前公告记录`readAnnouncement`
用户点击公告后，会在公告阅读表中插入一条记录，记录当前用户阅读公告的时间。
##### 判断用户是否阅读过当前公告
根据当前用户ID、公告ID，去公告阅读表中批量查询判断学生是否阅读过即可。

##### 根据角色获取公告的阅读状态`getAnnouncementReadDetails`
根据权限不同，获取公告当前的阅读状态。
例如：
- 管理员能够查看所有公告的阅读细节，即一共多少人，有多少人已阅读，有多少人没阅读过。
- 教师能够查看自己管理的班级的公告有多少阅读过，有多少未被阅读。
- 学生不支持该功能。

