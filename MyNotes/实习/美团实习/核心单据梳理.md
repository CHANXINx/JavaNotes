| 单据类型     | 概述                                                                       | 来源                                                                                                                                      | 维度(不同行是不同角度)                                                                | 生命周期                                                                                           | 核心属性                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | 承载的业务场景                                                                                                                                                                                                                                            | 关联数据                                 |
| -------- | ------------------------------------------------------------------------ | --------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------ |
| **客户订单** | - 客户下发的单据(目前实现上为DCC下发的调拨单，也有非订单用车生成的可以暂时不用关注)                            | - DCC下发调拨单触发                                                                                                                            | - 调拨单维度<br>    <br>- 收货地 + 发货地                                              | - 开始<br>    <br>    - 调拨单下发                                                                    | 点击展开内容<br><br>- customer_order_code，客户端单号<br>    <br>    - 供应链计划的调拨单号<br>        <br>- src_poi_id，发货地接单站点编码<br>    <br>- dest_poi_id，收货地接单站点编码<br>    <br>- business_type，业务类型<br>    <br>    - 1, 小象仓店运输<br>        <br>    - 3, 非订单用车<br>        <br>    - 4, 逆向运输<br>        <br>    - 7, 店间调拨<br>        <br>- status，状态<br>    <br>    - 0：新建, 默认值<br>        <br>    - 99：已取消<br>        <br>    - 100：已完成<br>        <br>- src_customer_code，发货地客户编码<br>    <br>    - 用于区分发货地是仓、店<br>        <br>- src_identify_code，发货地唯一编码<br>    <br>- src_addr_code，发货地编码<br>    <br>- src_addr_name，发货地名称<br>    <br>- dest_customer_code，收货地客户编码<br>    <br>    - 用于区分收货地是仓、店<br>        <br>- dest_identify_code，收货地唯一编码<br>    <br>- dest_addr_code，收货地编码<br>    <br>- dest_addr_name，收货地名称                                                                                                                                                                                                                                                                               | - 订单用车(非水产)<br>    <br>    - 匹配班次(波次)<br>        <br>- 订单用车(水产)<br>    <br>    - 匹配班次(波次)<br>        <br>    - 关联调拨单 + 采购单 +SKU的关系<br>        <br><br>- 逆向运输<br>    <br>    - 基于调拨单生成退货调拨类型的退货单<br>        <br>- 店群调拨<br>    <br>    - 运输执行装卸基于调拨单 | ![[Pasted image 20250810220921.png]] |
| **线路**   | - 排线后生成的一组有序的计划装卸地址，用于指导司机进行运输作业<br>    <br>- 表示一个司机/车辆的计划执行任务           | - 排线<br>    <br>    - 新建排线<br>        <br>    - 导入排线<br>        <br>    - 地图排线<br>        <br>    - 自动排线                                | - 多个装车地 + 多个收货地<br>    <br>- 司机<br>    <br>- 车辆                             | - 开始<br>    <br>    - 排线创建<br>        <br>- 完结<br>    <br>    - 无明确的完结，具体可以参考运单                | 点击展开内容<br><br>- use_car_type，用车类型<br>    <br>    - 1，非订单用车<br>        <br>    - 2，订单用车<br>        <br>    - 3，店群调拨用车<br>        <br>    - 4，进向揽收用车<br>        <br>- waybill_code，运单编码<br>    <br>- route_code，线路编码<br>    <br>- poi_id，接单站点编码<br>    <br>- carrier_code，承运商编码<br>    <br>- vehicle_code，车辆编码<br>    <br>- license_plate，车牌号<br>    <br>- driver_code，司机编码<br>    <br>- waybill_status，运单状态<br>    <br>    - 具体见waybill运单状态status<br>        <br>- method，创建排线的方式<br>    <br>    - 1：其他<br>        <br>    - 2：地图排线<br>        <br>    - 3：自动排线<br>        <br>    - 4：导入排线<br>        <br>    - 5：新建排线<br>        <br>- real_pkg_count，实物托数<br>    <br>- route_method，排线方式<br>    <br>    - 1, 交场排线<br>        <br>    - 2, 滚动排线<br>        <br>    - 3, 预排线<br>        <br>    - 4, 提前排线<br>        <br>    - 5, 交场前排线<br>        <br>- settle_type，结算类型<br>    <br>    - 1，城配结算<br>        <br>    - 2，包车结算<br>        <br>    - 4，保趟结算<br>        <br>- delivery_tag，波次<br>    <br>- support_aquatic_mode，是否水产                                        | - 运输计划核心单据，逆向除外均需要<br>    <br><br>- 订单用车(水产和非水产)<br>    <br>- 非订单用车<br>    <br>- 店群调拨<br>    <br>- 进向揽收                                                                                                                                            | ![[Pasted image 20250810220955.png]] |
| **运单**   | - 线路配车后生成的执行单据<br>    <br>- 逆向司机接单后生成的执行单据<br>    <br>- 表示一个司机/车辆的实际执行任务 | - 配车<br>    <br>    - 订单用车(水产、非水产)<br>        <br>    - 非订单用车<br>        <br>    - 店群调拨<br>        <br>    - 进向揽收<br>        <br>- 逆向接单 | - 线路(逆向除外，逆向无线路)<br>    <br>- 多个装车地 + 多个收货地<br>    <br>- 司机<br>    <br>- 车辆 | - 开始<br>    <br>    - 新建运单，非逆向配车或者逆向接单<br>        <br>- 完结<br>    <br>    - 司机最后一个仓/店签收完成，运单完结 | 点击展开内容<br><br>- waybill_code，运单编码<br>    <br>- poi_id，接单站点编码<br>    <br>- carrier_code，承运商编码<br>    <br>- vehicle_code，车辆编码<br>    <br>- license_plate，车牌号<br>    <br>- type，运单类型<br>    <br>    - 1，逆向运单<br>        <br>    - 3，非订单用车<br>        <br>    - 4，订单用车<br>        <br>    - 5，店群调拨<br>        <br>    - 6，进向揽收<br>        <br>- status，运单状态<br>    <br>    - 0，新建，配车<br>        <br>    - 10，已接单<br>        <br>    - 20，部分装车<br>        <br>    - 30，已装车<br>        <br>    - 40，运输中<br>        <br>    - 50，部分签收<br>        <br>    - 60，已签收<br>        <br>    - 90，已取消<br>        <br>- vehicle_route_code，线路编码<br>    <br>- finish_time，完成时间<br>    <br>- receive_time，接单时间<br>    <br>- created_at，创建时间<br>    <br>- cancle_time，取消时间<br>    <br>- driver_code，司机编码<br>    <br>- settle_type，结算类型<br>    <br>    - 见线路结算类型<br>        <br>- return_waybill_code，关联逆向运单号                                                                                                                                                                                | - 运输执行核心单据，所有运输类型都需要<br>    <br>    - 订单用车(水产和非水产)<br>        <br>    - 逆向运输<br>        <br>    - 非订单用车<br>        <br>    - 店群调拨<br>        <br>    - 进向揽收                                                                                        | ![[Pasted image 20250810221010.png]] |
| **装车单**  | - 运单在同一个发货地进行装车作业的单据                                                     | - 发运                                                                                                                                    | - 运单 + 发货地                                                                  | - 开始<br>    <br>    - 装车地发运                                                                    | 点击展开内容<br><br>- waybill_code，运单编码<br>    <br>- poi_id，接单站点编码<br>    <br>- carrier_code，承运商编码<br>    <br>- vehicle_code，车辆编码<br>    <br>- driver_code，司机编码<br>    <br>- license_plate，车牌号<br>    <br>- lading_order_code，装车单号<br>    <br>- business_type，业务类型<br>    <br>    - 1，小象仓店运输<br>        <br>    - 3，非订单用车<br>        <br>    - 4，逆向运输<br>        <br>    - 7，店间调拨<br>        <br>    - 8，进向揽收<br>        <br>- customer_lading_code，客户装车单号<br>    <br>- outbound_identify_code，发货地址唯一编码<br>    <br>- outbound_addr_code，发货地址编码<br>    <br>- lading_pkg_num，装车数量<br>    <br>- actual_lading_time，实际装车时间<br>    <br>- confirm_time，确认时间<br>    <br>- confirm_status，确认状态<br>    <br>    - 0：未确认<br>        <br>    - 1：已确认<br>        <br>- temperature_level，温层<br>    <br>- vehicle_type，车型<br>    <br>- tray_num，实际托盘数<br>    <br>- cage_num，实际笼车数<br>    <br>- pcs，件数                                                                                                                                                                                        | - 运输执行核心单据，所有运输类型都需要，主要是用于:<br>    <br>    - 发运                                                                                                                                                                                                    | ![[Pasted image 20250810221802.png]] |
| **配送单**  | - 运单在同一个发货地+同一个配送单进行配送作业的单据                                              | - 发运                                                                                                                                    | - 运单 + 发货地 + 收货地<br>    <br>- 装车单 + 收货地                                     | - 开始<br>    <br>    - 装车地发运<br>        <br>- 完结<br>    <br>    - 收货地签收                         | 点击展开内容<br><br>- waybill_code，运单编码<br>    <br>- poi_id，接单站点编码<br>    <br>- carrier_code，承运商编码<br>    <br>- vehicle_code，车辆编码<br>    <br>- driver_code，司机编码<br>    <br>- license_plate，车牌号<br>    <br>- lading_order_code，装车单号<br>    <br>- delivery_order_code，配送单号<br>    <br>- business_type，业务类型<br>    <br>    - 见lading_order business_type<br>        <br>- customer_delivery_code，客户配送单号<br>    <br>- outbound_identify_code，发货地址唯一编码<br>    <br>- outbound_addr_code，发货地址编码<br>    <br>- inbound_identify_code，收货地址唯一编码<br>    <br>- inbound_addr_code，收货地址编码<br>    <br>- sign_status，签收状态<br>    <br>    - 0：未签收<br>        <br>    - 10：部分签收<br>        <br>    - 20：全部签收<br>        <br>- sign_pkg_time，签收时间<br>    <br>- plan_delivery_time，计划卸车时间<br>    <br>- actual_delivery_time，计划卸车时间<br>    <br>- confirm_time，确认时间<br>    <br>- confirm_status，确认状态<br>    <br>    - 0：未确认<br>        <br>    - 1：已确认<br>        <br>- temperature_level，温层<br>    <br>- vehicle_type，车型<br>    <br>- tray_num，实际托盘数<br>    <br>- cage_num，实际笼车数<br>    <br>- pcs，件数 | - 运输执行核心单据，所有运输类型都需要，主要是用于:<br>    <br>    - 发运<br>        <br>    - 签收                                                                                                                                                                            | ![[Pasted image 20250810221815.png]] |
| **退货单**  | - 从发货地到收货地的逆向任务                                                          | - DCC下发退货调拨单<br>    <br>    - 退货返仓<br>        <br>- 库内下发返仓单<br>    <br>    - B级品返仓<br>        <br>- 门店新建退货单<br>    <br>    - 资产返仓       | - 收货地 + 发货地                                                                 | - 开始<br>    <br>    - 新建退货单<br>        <br>- 完结<br>    <br>    - 大仓签收                          | 点击展开内容<br><br>- waybill_code，运单编码<br>    <br>- return_order_code，退货单号<br>    <br>- return_category，退货类别<br>    <br>    - 1，退货返仓<br>        <br>    - 2，资产返仓<br>        <br>    - 3，B级品返仓<br>        <br>- return_status，退货单状态<br>    <br>    - 0：新建<br>        <br>    - 10：退货出站<br>        <br>    - 20：已接单<br>        <br>    - 30：已装车<br>        <br>    - 40：退货入库<br>        <br>    - 50：已完成<br>        <br>- customer_order_code，客户订单编码<br>    <br>- outbound_identify_code，发货地址唯一编码<br>    <br>- outbound_addr_code，发货地址编码<br>    <br>- inbound_identify_code，收货地址唯一编码<br>    <br>- inbound_addr_code，收货地址编码<br>    <br>- poi_id，接单站点编码<br>    <br>- carrier_code，承运商编码<br>    <br>- vehicle_code，车辆编码<br>    <br>- driver_code，司机编码<br>    <br>- license_plate，车牌号<br>    <br>- pkg_num，包裹数量<br>    <br>- return_status_time，退货状态时间<br>    <br>- recycle_status，回收状态<br>    <br>    - 1:待回收<br>        <br>    - 2:无法回收<br>        <br>    - 3:已扫描                                                                                                               | - 逆向运输核心单据，全流程都基于退货单<br>    <br>    - 建单<br>        <br>    - 扫码接单<br>        <br>    - 装车<br>        <br>    - 签收<br>        <br>    - 物资流水和差异                                                                                                    | ![[Pasted image 20250810221831.png]] |
![[Pasted image 20250810221851.png]]